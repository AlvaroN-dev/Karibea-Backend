# =============================================================================
# KARIBEA BACKEND - ENVIRONMENT CONFIGURATION TEMPLATE
# =============================================================================
# Copy this file to .env and fill in the values.
# IMPORTANT: All variables are REQUIRED - no default values in docker-compose.
# =============================================================================

# -----------------------------------------------------------------------------
# DATABASE CONFIGURATION
# -----------------------------------------------------------------------------
DB_USERNAME=postgres
DB_PASSWORD=your_secure_password_here
SPRING_JPA_HIBERNATE_DDL_AUTO=update

# HikariCP Connection Pool
SPRING_DATASOURCE_HIKARI_MAXIMUM_POOL_SIZE=5
SPRING_DATASOURCE_HIKARI_MINIMUM_IDLE=2
SPRING_DATASOURCE_HIKARI_CONNECTION_TIMEOUT=30000
SPRING_DATASOURCE_HIKARI_IDLE_TIMEOUT=600000
SPRING_DATASOURCE_HIKARI_MAX_LIFETIME=1800000

# Database URLs for each microservice
SPRING_DATASOURCE_URL_CATALOG=jdbc:postgresql://postgres:5432/catalog_db
SPRING_DATASOURCE_URL_CHATBOT=jdbc:postgresql://postgres:5432/chatbot_db
SPRING_DATASOURCE_URL_IDENTITY=jdbc:postgresql://postgres:5432/identity_db
SPRING_DATASOURCE_URL_INVENTORY=jdbc:postgresql://postgres:5432/inventory_db
SPRING_DATASOURCE_URL_MARKETING=jdbc:postgresql://postgres:5432/marketing_db
SPRING_DATASOURCE_URL_NOTIFICATION=jdbc:postgresql://postgres:5432/notification_db
SPRING_DATASOURCE_URL_ORDER=jdbc:postgresql://postgres:5432/order_db
SPRING_DATASOURCE_URL_PAYMENT=jdbc:postgresql://postgres:5432/payment_db
SPRING_DATASOURCE_URL_REVIEW=jdbc:postgresql://postgres:5432/review_db
SPRING_DATASOURCE_URL_SEARCH=jdbc:postgresql://postgres:5432/search_db
SPRING_DATASOURCE_URL_SHIPPING=jdbc:postgresql://postgres:5432/shipping_db
SPRING_DATASOURCE_URL_SHOPCART=jdbc:postgresql://postgres:5432/shopcart_db
SPRING_DATASOURCE_URL_STORE=jdbc:postgresql://postgres:5432/store_db
SPRING_DATASOURCE_URL_USER=jdbc:postgresql://postgres:5432/user_db

# -----------------------------------------------------------------------------
# KAFKA CONFIGURATION
# -----------------------------------------------------------------------------
KAFKA_CLUSTER_ID=MkU3OEVBNTcwNTJENDM2Qk
KAFKA_BOOTSTRAP_SERVERS=kafka-0:9092,kafka-1:9092,kafka-2:9092
KAFKA_LOG_RETENTION_HOURS=168
KAFKA_LOG_RETENTION_BYTES=1073741824

# Kafka Common Settings
KAFKA_PROCESS_ROLES=broker,controller
KAFKA_CONTROLLER_QUORUM_VOTERS=0@kafka-0:9093,1@kafka-1:9093,2@kafka-2:9093
KAFKA_LISTENER_SECURITY_PROTOCOL_MAP=PLAINTEXT:PLAINTEXT,CONTROLLER:PLAINTEXT,EXTERNAL:PLAINTEXT
KAFKA_CONTROLLER_LISTENER_NAMES=CONTROLLER
KAFKA_INTER_BROKER_LISTENER_NAME=PLAINTEXT
KAFKA_HEAP_OPTS=-Xms256m -Xmx512m
KAFKA_LOG_DIRS=/var/lib/kafka/data
KAFKA_AUTO_CREATE_TOPICS_ENABLE=true
KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR=1
KAFKA_TRANSACTION_STATE_LOG_REPLICATION_FACTOR=1
KAFKA_TRANSACTION_STATE_LOG_MIN_ISR=1

# Kafka Node 0 (Development)
KAFKA_NODE_ID_0=0
KAFKA_LISTENERS_0=PLAINTEXT://0.0.0.0:9092,CONTROLLER://0.0.0.0:9093,EXTERNAL://0.0.0.0:9094
KAFKA_ADVERTISED_LISTENERS_0=PLAINTEXT://kafka-0:9092,EXTERNAL://localhost:9094

# Kafka Node 1 (Development)
KAFKA_NODE_ID_1=1
KAFKA_LISTENERS_1=PLAINTEXT://0.0.0.0:9092,CONTROLLER://0.0.0.0:9093,EXTERNAL://0.0.0.0:9095
KAFKA_ADVERTISED_LISTENERS_1=PLAINTEXT://kafka-1:9092,EXTERNAL://localhost:9095

# Kafka Node 2 (Development)
KAFKA_NODE_ID_2=2
KAFKA_LISTENERS_2=PLAINTEXT://0.0.0.0:9092,CONTROLLER://0.0.0.0:9093,EXTERNAL://0.0.0.0:9096
KAFKA_ADVERTISED_LISTENERS_2=PLAINTEXT://kafka-2:9092,EXTERNAL://localhost:9096

# -----------------------------------------------------------------------------
# KAFKA PRODUCTION SETTINGS (for docker-compose.prod.yml)
# -----------------------------------------------------------------------------
KAFKA_HEAP_OPTS_PROD=-Xms512m -Xmx1g
KAFKA_LISTENER_SECURITY_PROTOCOL_MAP_PROD=PLAINTEXT:PLAINTEXT,CONTROLLER:PLAINTEXT
KAFKA_AUTO_CREATE_TOPICS_ENABLE_PROD=false
KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR_PROD=3
KAFKA_TRANSACTION_STATE_LOG_REPLICATION_FACTOR_PROD=3
KAFKA_TRANSACTION_STATE_LOG_MIN_ISR_PROD=2
KAFKA_MIN_INSYNC_REPLICAS=2
KAFKA_DEFAULT_REPLICATION_FACTOR=3
KAFKA_NUM_PARTITIONS=6
KAFKA_LOG_SEGMENT_BYTES=1073741824
KAFKA_LOG_CLEANUP_POLICY=delete

# Kafka Production Node 0
KAFKA_LISTENERS_PROD_0=PLAINTEXT://0.0.0.0:9092,CONTROLLER://0.0.0.0:9093
KAFKA_ADVERTISED_LISTENERS_PROD_0=PLAINTEXT://kafka-0:9092

# Kafka Production Node 1
KAFKA_LISTENERS_PROD_1=PLAINTEXT://0.0.0.0:9092,CONTROLLER://0.0.0.0:9093
KAFKA_ADVERTISED_LISTENERS_PROD_1=PLAINTEXT://kafka-1:9092

# Kafka Production Node 2
KAFKA_LISTENERS_PROD_2=PLAINTEXT://0.0.0.0:9092,CONTROLLER://0.0.0.0:9093
KAFKA_ADVERTISED_LISTENERS_PROD_2=PLAINTEXT://kafka-2:9092

# -----------------------------------------------------------------------------
# EUREKA CONFIGURATION
# -----------------------------------------------------------------------------
SERVER_PORT_EUREKA=8761
EUREKA_CLIENT_SERVICEURL_DEFAULTZONE=http://microservice-eureka:8761/eureka/

# -----------------------------------------------------------------------------
# CONFIG SERVER
# -----------------------------------------------------------------------------
SERVER_PORT_CONFIG=8888
SPRING_CONFIG_IMPORT=optional:configserver:http://microservice-config:8888/
SPRING_PROFILES_ACTIVE=dev

# -----------------------------------------------------------------------------
# GATEWAY
# -----------------------------------------------------------------------------
SERVER_PORT_GATEWAY=8080

# -----------------------------------------------------------------------------
# JWT / SECURITY CONFIGURATION
# -----------------------------------------------------------------------------
# REQUIRED: Minimum 256-bit key for HS256 algorithm
JWT_SECRET=your-super-secret-jwt-key-that-is-at-least-256-bits-long-for-security
JWT_EXPIRATION=86400000
JWT_ISSUER_URI=http://microservice-identity:8082

# -----------------------------------------------------------------------------
# OAUTH2 - GOOGLE
# -----------------------------------------------------------------------------
# Optional: Leave empty if not using Google OAuth
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# -----------------------------------------------------------------------------
# PAYMENT PROVIDERS
# -----------------------------------------------------------------------------
# Stripe (Required for payment processing)
STRIPE_API_KEY=sk_test_your_stripe_test_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret

# PayPal (Optional)
PAYPAL_CLIENT_ID=
PAYPAL_CLIENT_SECRET=

# -----------------------------------------------------------------------------
# EMAIL CONFIGURATION
# -----------------------------------------------------------------------------
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=your-email@gmail.com
MAIL_PASSWORD=your-app-password

# -----------------------------------------------------------------------------
# TWILIO (SMS/WhatsApp)
# -----------------------------------------------------------------------------
# Optional: Leave empty if not using SMS notifications
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_PHONE_NUMBER=

# -----------------------------------------------------------------------------
# ELASTICSEARCH
# -----------------------------------------------------------------------------
ELASTICSEARCH_URIS=http://elasticsearch:9200

# -----------------------------------------------------------------------------
# AI / CHATBOT
# -----------------------------------------------------------------------------
# AI21 (Current Provider)
CHATBOT_AI21_API_KEY=your-ai21-api-key
CHATBOT_AI21_API_URL=https://api.ai21.com/studio/v1/chat/completions
CHATBOT_AI21_MODEL=jamba-mini-1.7
CHATBOT_AI21_MAX_TOKENS=300
CHATBOT_AI21_TEMPERATURE=0.7

# OpenAI (Alternative Provider)
OPENAI_API_KEY=sk-your-openai-api-key
OPENAI_MODEL=gpt-4o-mini

# -----------------------------------------------------------------------------
# DOCKER REGISTRY (Production)
# -----------------------------------------------------------------------------
# Leave DOCKER_REGISTRY empty for local builds
# Example: DOCKER_REGISTRY=myregistry.azurecr.io/
DOCKER_REGISTRY=
VERSION=latest

# -----------------------------------------------------------------------------
# JAVA OPTIONS
# -----------------------------------------------------------------------------
JAVA_OPTS=-Xms128m -Xmx256m -XX:+UseG1GC -XX:MaxGCPauseMillis=100
